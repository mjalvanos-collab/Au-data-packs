<script>
  // Capture UTM for affiliate attribution (kept as-is)
  const U = new URL(location.href);
  const utm = ['utm_source','utm_medium','utm_campaign'].reduce((o,k)=> (o[k]=U.searchParams.get(k)||'',o),{});

  // ✅ Real, working links (swap to your affiliate URLs later)
  const TOOLS = [
    {name:"ManyChat",   cat:"Chatbots",   price:"paid", desc:"IG/FB/WhatsApp DM automation — comments → DMs.", link:"https://manychat.com/",                 proof:"Partner program available", tags:["instagram","dm","leads"]},
    {name:"Zapier",     cat:"Automation", price:"free", desc:"Automate tasks across 6,000+ apps.",              link:"https://zapier.com/",                  proof:"Affiliate via PartnerStack", tags:["workflows","ops"]},
    {name:"beehiiv",    cat:"Newsletters",price:"free", desc:"Launch & monetize a newsletter (boosts, ads).",    link:"https://www.beehiiv.com/",             proof:"Affiliate program",          tags:["email","ads"]},
    {name:"Notion",     cat:"Writing",    price:"free", desc:"Docs/ops hub with Notion AI.",                     link:"https://www.notion.so/product/ai",     proof:"Affiliate program",          tags:["ops","docs"]},
    {name:"Jasper",     cat:"Writing",    price:"paid", desc:"High-quality ads, emails, product copy.",         link:"https://www.jasper.ai/",               proof:"Affiliate program",          tags:["copy","ads"]},
    {name:"Canva",      cat:"Design",     price:"free", desc:"Magic Studio, brand kits, pro assets.",           link:"https://www.canva.com/",               proof:"Affiliate program",          tags:["thumbnails","social"]},
    {name:"ElevenLabs", cat:"Voice",      price:"paid", desc:"Best-in-class AI voice cloning & TTS.",           link:"https://elevenlabs.io/",               proof:"Affiliate program",          tags:["voice","audio"]},
    {name:"Synthesia",  cat:"Video",      price:"paid", desc:"Text-to-video with avatars for tutorials & ads.", link:"https://www.synthesia.io/",            proof:"Affiliate program",          tags:["video","training"]},
    {name:"Runway",     cat:"Video",      price:"free", desc:"Gen-AI video: shorts, ads, stylization.",         link:"https://runwayml.com/",                proof:"Creator/affiliate paths",    tags:["gen-ai","video"]}
  ];

  const grid = document.getElementById('grid'), q=$('#q'), cat=$('#cat'), price=$('#price'), reset=$('#reset');
  function $(s){return document.querySelector(s)}
  function card(t){
    const params = new URLSearchParams({...utm});
    const url = t.link + (t.link.includes('?')?'&':'?') + params.toString();
    return `
      <article class="card">
        <span class="tag">${t.cat}</span>
        <div class="muted">${t.price==='free'?'Free plan':'Paid'} • ${t.proof||''}</div>
        <h3 style="margin:.2rem 0 .3rem">${t.name}</h3>
        <p class="muted" style="margin:.2rem 0 .6rem">${t.desc}</p>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <a class="btn" href="${url}" target="_blank" rel="nofollow sponsored noopener">Get the tool</a>
        </div>
      </article>`;
  }
  function render(){
    const term=(q.value||'').toLowerCase();
    const C=cat.value, P=price.value;
    const out=TOOLS.filter(t=>{
      const okCat=!C||t.cat===C, okPrice=!P||t.price===P;
      const okTerm=!term||(t.name+' '+t.desc+' '+(t.tags||[]).join(' ')).toLowerCase().includes(term);
      return okCat && okPrice && okTerm;
    });
    grid.innerHTML = out.map(card).join('') || `<div class="card">No results. Try a different search or filter.</div>`;
  }
  q.addEventListener('input',render); cat.addEventListener('change',render); price.addEventListener('change',render);
  reset.addEventListener('click',()=>{q.value='';cat.value='';price.value='';render()});
  render();
  document.getElementById('y').textContent=new Date().getFullYear();
</script>
